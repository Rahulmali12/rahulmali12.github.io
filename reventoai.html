<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REVENTO DEFENCE INTELLIGENCE</title>
    <style>
        /* --- MILITARY THEME --- */
        :root {
            --neon: #00ff41; /* Hacker Green */
            --dark: #050505; /* Deep Black */
            --glass: rgba(0, 59, 0, 0.2);
            --border: 1px solid var(--neon);
        }

        body {
            background-color: var(--dark);
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: var(--neon);
            text-transform: uppercase;
            border-bottom: 2px solid var(--neon);
            padding-bottom: 15px;
            text-shadow: 0 0 10px var(--neon);
        }

        .status-bar {
            text-align: center;
            color: #aaa;
            font-size: 0.8rem;
            margin-bottom: 30px;
            animation: blink 2s infinite;
        }

        /* CARD DESIGN */
        .card {
            background: var(--glass);
            border: var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.1);
        }

        .news-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
        }
        
        .news-title:hover {
            color: var(--neon);
            text-decoration: underline;
        }

        .source-tag {
            background: var(--neon);
            color: #000;
            padding: 2px 8px;
            font-weight: bold;
            font-size: 0.7rem;
            margin-right: 10px;
        }

        /* AI QUESTION SECTION */
        .ai-section {
            margin-top: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-left: 3px solid var(--neon);
            padding: 10px;
        }

        .ai-label {
            color: var(--neon);
            font-weight: bold;
            font-size: 0.9rem;
            display: block;
            margin-bottom: 5px;
        }

        .hidden-answer {
            display: none;
            margin-top: 10px;
            color: yellow;
            border-top: 1px dashed #555;
            padding-top: 5px;
        }

        button {
            background: transparent;
            border: 1px solid var(--neon);
            color: var(--neon);
            padding: 5px 15px;
            cursor: pointer;
            margin-top: 10px;
            font-family: inherit;
            font-weight: bold;
            text-transform: uppercase;
        }

        button:hover {
            background: var(--neon);
            color: #000;
        }

        @keyframes blink { 50% { opacity: 0.5; } }
        
        .loader { text-align: center; padding: 20px; color: var(--neon); }
    </style>
</head>
<body>

    <h1>Revento War-Room</h1>
    <div class="status-bar">SYSTEM ONLINE | CONNECTED TO SATELLITE FEED</div>

    <div id="news-feed">
        <div class="loader">
            [SCANNING GLOBAL DEFENCE NEWS...]<br>
            Please wait...
        </div>
    </div>

<script>
    // --- API KEYS (Inserted Successfully) ---
    const NEWS_API_KEY = "7eed358766060404613f5e50f0532a02"; 
    const GEMINI_API_KEY = "AIzaSyDJQIOJK7P_-nUWqoF6cuKdUEPNINQGL3M"; 

    const feedContainer = document.getElementById('news-feed');

    // 1. NEWS FETCH FUNCTION
    async function startSystem() {
        // Searching for Indian Defence News
        const url = `https://gnews.io/api/v4/search?q=Indian+Defence+DRDO+Army+Missile&lang=en&country=in&max=3&apikey=${NEWS_API_KEY}`;
        
        try {
            const response = await fetch(url);
            const data = await response.json();

            if(!data.articles) {
                feedContainer.innerHTML = "<p style='color:red; text-align:center'>ERROR: API LIMIT REACHED OR INVALID KEY</p>";
                return;
            }

            feedContainer.innerHTML = ""; // Clear loader

            // Process top 3 articles
            data.articles.slice(0, 3).forEach((article, index) => {
                createCard(article, index);
            });

        } catch (error) {
            console.error(error);
            feedContainer.innerHTML = "<p style='color:red; text-align:center'>SYSTEM OFFLINE: CHECK INTERNET</p>";
        }
    }

    // 2. CREATE CARD & CALL AI
    function createCard(article, index) {
        const cardId = `intel-${index}`;
        
        const cardHTML = `
            <div class="card">
                <div>
                    <span class="source-tag">INTEL</span>
                    <span style="font-size:0.8rem; color:#aaa;">${article.source.name}</span>
                </div>
                <h3 style="margin: 10px 0;">${article.title}</h3>
                <p style="color:#ddd; font-size:0.9rem;">${article.description}</p>
                <a href="${article.url}" target="_blank" style="color:var(--neon); font-size:0.8rem;">[READ FULL REPORT]</a>

                <div class="ai-section" id="${cardId}">
                    <span class="ai-label">ü§ñ AI MISSION OBJECTIVE:</span>
                    <span class="loading-text" style="color:#fff; animation:blink 1s infinite;">Generating UPSC Question...</span>
                </div>
            </div>
        `;

        const div = document.createElement('div');
        div.innerHTML = cardHTML;
        feedContainer.appendChild(div);

        // Call Gemini for this specific news
        generateQuiz(article.title + " " + article.description, cardId);
    }

    // 3. GEMINI AI FUNCTION
    async function generateQuiz(text, elementId) {
        const aiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`;
        
        const prompt = `
            Act as a UPSC NDA Exam paper setter.
            Read this news: "${text}".
            Create 1 tough Multiple Choice Question (MCQ) based on it.
            Format exactly like this:
            Q: [Question]
            A) [Option 1]
            B) [Option 2]
            C) [Option 3]
            D) [Option 4]
            ANS: [Correct Option] - [One line explanation]
        `;

        try {
            const response = await fetch(aiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });

            const data = await response.json();
            const aiResult = data.candidates[0].content.parts[0].text;
            
            // Show result
            renderQuiz(elementId, aiResult);

        } catch (error) {
            document.getElementById(elementId).innerHTML = "<span style='color:red'>AI CONNECTION FAILED.</span>";
        }
    }

    // 4. DISPLAY QUIZ
    function renderQuiz(elementId, text) {
        // Splitting Question and Answer
        let parts = text.split("ANS:");
        let question = parts[0];
        let answer = parts[1] ? parts[1] : "Check full details online.";

        const finalHTML = `
            <span class="ai-label">‚öîÔ∏è MISSION OBJECTIVE (QUESTION):</span>
            <pre style="white-space: pre-wrap; font-family:inherit; color:#e0e0e0; margin:0;">${question}</pre>
            
            <button onclick="this.nextElementSibling.style.display='block'">REVEAL INTEL</button>
            <div class="hidden-answer">
                > CORRECT: ${answer}
            </div>
        `;
        
        document.getElementById(elementId).innerHTML = finalHTML;
    }

    // START
    startSystem();

</script>

</body>
</html>
