<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REVENTO - Air Force Live Exam</title>
    <style>
        /* --- 1. CSS (Design & Theme) --- */
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f0f2f5; user-select: none; } /* Text selection disabled */
        
        /* Header */
        .header { background: #0056b3; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .timer { font-size: 20px; font-weight: bold; background: #004494; padding: 5px 15px; border-radius: 5px; }

        /* Main Layout */
        .container { display: flex; height: 90vh; }
        
        /* Question Area (Left) */
        .question-area { flex: 3; padding: 20px; overflow-y: auto; background: white; border-right: 2px solid #ddd; }
        .q-box { font-size: 18px; margin-bottom: 20px; font-weight: 500; }
        .options label { display: block; background: #f8f9fa; padding: 10px; margin: 5px 0; border: 1px solid #ccc; cursor: pointer; border-radius: 5px; }
        .options input { margin-right: 10px; }
        .options label:hover { background: #e9ecef; }

        /* Sidebar (Right) - Question Palette */
        .sidebar { flex: 1; background: #fff; padding: 10px; display: flex; flex-direction: column; }
        .student-info { text-align: center; margin-bottom: 10px; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
        .student-img { width: 80px; height: 80px; background: #ddd; border-radius: 50%; margin: 0 auto 10px; }
        
        .subject-tabs { display: flex; gap: 5px; margin-bottom: 15px; }
        .tab { flex: 1; padding: 8px; background: #ccc; border: none; cursor: not-allowed; font-weight: bold; font-size: 12px; }
        .tab.active { background: #28a745; color: white; cursor: pointer; }
        .tab.locked { opacity: 0.6; }

        .palette { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .p-btn { padding: 10px; background: #fff; border: 1px solid #ccc; cursor: pointer; font-weight: bold; }
        .p-btn.answered { background: #28a745; color: white; border-color: #28a745; }
        .p-btn.current { border: 2px solid #0056b3; }

        .controls { margin-top: auto; display: flex; gap: 10px; }
        .btn { padding: 10px 20px; border: none; cursor: pointer; font-weight: bold; color: white; flex: 1; }
        .btn-save { background: #28a745; }
        .btn-submit { background: #dc3545; }

        /* Security Warning Overlay */
        #security-alert { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: red; z-index: 1000; text-align: center; padding-top: 20%; font-size: 24px; }
    </style>
</head>
<body oncontextmenu="return false;"> <div id="security-alert">
        WARNING: Tab Switching is NOT Allowed!<br>
        <button onclick="resumeExam()" style="padding:10px; margin-top:20px;">Return to Exam</button>
    </div>

    <div class="header">
        <div>REVENTO EXAM PORTAL</div>
        <div class="timer" id="timer">45:00</div>
        <div>ID: USER_001</div>
    </div>

    <div class="container">
        <div class="question-area">
            <h3 id="subject-title">Subject: Mathematics</h3>
            <div class="q-box" id="question-text">Loading Question...</div>
            <div class="options" id="options-container">
                </div>
            <div style="margin-top: 30px;">
                <button class="btn btn-save" onclick="saveAndNext()">Save & Next</button>
            </div>
        </div>

        <div class="sidebar">
            <div class="student-info">
                <div class="student-img"><img src="https://via.placeholder.com/80" alt="User"></div>
                <div>Student Name</div>
            </div>

            <div class="subject-tabs">
                <button id="tab-math" class="tab active">MATHS</button>
                <button id="tab-phy" class="tab locked">PHYSICS</button>
                <button id="tab-eng" class="tab locked">ENGLISH</button>
            </div>

            <div class="palette" id="palette-container">
                </div>

            <div class="controls">
                <button class="btn btn-submit" onclick="submitSection()">Submit Section</button>
            </div>
        </div>
    </div>

    <script>
        /* --- 2. JavaScript (Logic & Data) --- */

        // --- DATA: यहाँ आप अपने प्रश्न बदल सकते हैं ---
        // 'ans' में सही ऑप्शन का index लिखें (0, 1, 2, या 3)
        const examData = {
            maths: [
                { id: 1, q: "यदि f(x) = x² + 2x, तो f(2) का मान क्या है?", opts: ["4", "8", "6", "10"], ans: 1 },
                { id: 2, q: "Integration of sin(x) dx is?", opts: ["cos(x)", "-cos(x)", "sin(x)", "-sin(x)"], ans: 1 },
                { id: 3, q: "Matrix A is singular if |A| is?", opts: ["1", "-1", "0", "Undefined"], ans: 2 },
                { id: 4, q: "Value of tan(45°)?", opts: ["0", "1", "Infinity", "1/2"], ans: 1 },
                { id: 5, q: "Limit x->0 of (sin x)/x is?", opts: ["0", "1", "Infinity", "-1"], ans: 1 }
            ],
            physics: [
                { id: 1, q: "Unit of Force is?", opts: ["Newton", "Joule", "Watt", "Pascal"], ans: 0 },
                { id: 2, q: "Dimension of Power?", opts: ["ML2T-3", "MLT-2", "ML2T-2", "None"], ans: 0 }
            ],
            english: [
                { id: 1, q: "Synonym of 'Abundant'?", opts: ["Scarce", "Plentiful", "Rare", "Few"], ans: 1 }
            ]
        };

        // --- STATE VARIABLES ---
        let currentSubject = 'maths';
        let currentQIndex = 0;
        let userAnswers = { maths: {}, physics: {}, english: {} };
        let timerTime = 45 * 60; // 45 Minutes

        // --- CORE FUNCTIONS ---

        function loadQuestion(index) {
            const data = examData[currentSubject];
            const q = data[index];
            currentQIndex = index;

            document.getElementById('question-text').innerHTML = `Q${index + 1}. ${q.q}`;
            const optsContainer = document.getElementById('options-container');
            optsContainer.innerHTML = '';

            q.opts.forEach((opt, i) => {
                const checked = userAnswers[currentSubject][index] === i ? 'checked' : '';
                optsContainer.innerHTML += `
                    <label>
                        <input type="radio" name="opt" value="${i}" ${checked}> ${opt}
                    </label>
                `;
            });
            renderPalette();
        }

        function saveAndNext() {
            const selected = document.querySelector('input[name="opt"]:checked');
            if (selected) {
                userAnswers[currentSubject][currentQIndex] = parseInt(selected.value);
            }
            
            if (currentQIndex < examData[currentSubject].length - 1) {
                loadQuestion(currentQIndex + 1);
            } else {
                alert("Last question of this section!");
            }
        }

        function renderPalette() {
            const container = document.getElementById('palette-container');
            container.innerHTML = '';
            examData[currentSubject].forEach((_, i) => {
                const isAnswered = userAnswers[currentSubject][i] !== undefined;
                const isCurrent = i === currentQIndex;
                let className = 'p-btn';
                if (isAnswered) className += ' answered';
                if (isCurrent) className += ' current';
                
                container.innerHTML += `<button class="${className}" onclick="loadQuestion(${i})">${i + 1}</button>`;
            });
        }

        // --- SUBJECT LOCKING LOGIC ---
        function submitSection() {
            if (!confirm("Are you sure you want to submit this section? You cannot go back.")) return;

            if (currentSubject === 'maths') {
                alert("Maths Submitted! Proceeding to Physics.");
                currentSubject = 'physics';
                document.getElementById('tab-math').classList.remove('active');
                document.getElementById('tab-math').classList.add('locked'); // Lock Math
                document.getElementById('tab-phy').classList.remove('locked');
                document.getElementById('tab-phy').classList.add('active');
                document.getElementById('subject-title').innerText = "Subject: Physics";
                loadQuestion(0);
            } else if (currentSubject === 'physics') {
                alert("Physics Submitted! Proceeding to English.");
                currentSubject = 'english';
                document.getElementById('tab-phy').classList.remove('active');
                document.getElementById('tab-phy').classList.add('locked');
                document.getElementById('tab-eng').classList.remove('locked');
                document.getElementById('tab-eng').classList.add('active');
                document.getElementById('subject-title').innerText = "Subject: English";
                loadQuestion(0);
            } else {
                calculateResult();
            }
        }

        function calculateResult() {
            let score = 0;
            // Simple scoring logic for demo
            ['maths', 'physics', 'english'].forEach(sub => {
                examData[sub].forEach((q, idx) => {
                    if (userAnswers[sub][idx] === q.ans) {
                        score++;
                    }
                });
            });
            alert(`Exam Completed! Your Score: ${score}`);
            // Here you would send data to Firebase
        }

        // --- SECURITY FEATURES (Anti-Cheat) ---
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.getElementById('security-alert').style.display = 'block';
                // You can add logic here to auto-submit exam if they cheat twice
            }
        });

        function resumeExam() {
            document.getElementById('security-alert').style.display = 'none';
        }

        // Disable specific keys (F12, PrintScreen, etc.)
        document.onkeydown = function(e) {
            if(e.keyCode == 123) { return false; } // F12
            if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { return false; } // Ctrl+Shift+I
            if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { return false; } // Ctrl+U
        }

        // --- TIMER LOGIC ---
        setInterval(() => {
            if (timerTime > 0) {
                timerTime--;
                let m = Math.floor(timerTime / 60);
                let s = timerTime % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0' + s : s}`;
            } else {
                alert("Time Up!");
                calculateResult();
            }
        }, 1000);

        // Initial Load
        loadQuestion(0);

    </script>
</body>
</html>
