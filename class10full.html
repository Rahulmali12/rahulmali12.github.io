<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revento Academy | Official Assessment Center</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --tcs-blue: #306da6;
            --bg-grey: #f4f6f9;
            --card-hover: #e3f2fd;
        }

        * { box-sizing: border-box; user-select: none; }
        body { margin: 0; font-family: 'Roboto', sans-serif; background: var(--bg-grey); height: 100vh; display: flex; flex-direction: column; }

        /* --- HEADER --- */
        .top-bar {
            height: 60px; background: white; border-bottom: 3px solid var(--tcs-blue); display: flex; justify-content: space-between; align-items: center; padding: 0 30px;
        }
        .brand { font-size: 1.5rem; font-weight: bold; color: var(--tcs-blue); display: flex; align-items: center; gap: 10px; }
        .profile-badge { background: #eee; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: bold; color: #555; }

        /* --- DASHBOARD (HOME) --- */
        #dashboard { padding: 40px; max-width: 1200px; margin: 0 auto; width: 100%; }
        .welcome-text { font-size: 1.8rem; margin-bottom: 30px; color: #333; }
        
        .subject-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        
        .sub-card {
            background: white; padding: 25px; border-radius: 8px; border: 1px solid #ddd; border-bottom: 4px solid #ccc;
            cursor: pointer; transition: 0.3s; position: relative; overflow: hidden;
        }
        .sub-card:hover { transform: translateY(-5px); border-bottom-color: var(--tcs-blue); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .sub-card h3 { margin: 0 0 10px 0; color: #333; }
        .sub-card p { margin: 0; font-size: 0.9rem; color: #666; }
        .icon { font-size: 2rem; margin-bottom: 15px; color: var(--tcs-blue); }

        .mix-card { background: linear-gradient(135deg, #306da6, #0d47a1); color: white !important; border: none; }
        .mix-card h3, .mix-card p, .mix-card .icon { color: white; }

        /* --- EXAM INTERFACE (HIDDEN INITIALLY) --- */
        #exam-portal { display: none; height: calc(100vh - 60px); display: flex; flex-direction: column; }
        
        .exam-header { background: #222; color: #fff; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
        .timer-badge { background: black; border: 1px solid #555; padding: 5px 10px; font-weight: bold; color: #00e676; font-size: 1.2rem; }

        .exam-body { display: flex; flex: 1; overflow: hidden; }
        .q-panel { flex: 1; padding: 30px; overflow-y: auto; background: white; }
        .side-panel { width: 300px; background: #f0f0f0; border-left: 1px solid #ccc; display: flex; flex-direction: column; }
        
        /* Question Styles */
        .q-txt { font-size: 1.3rem; margin-bottom: 25px; font-weight: 500; line-height: 1.5; }
        .opt-row { display: flex; align-items: center; padding: 12px; border: 1px solid #ddd; margin-bottom: 10px; cursor: pointer; border-radius: 4px; }
        .opt-row:hover { background: #e3f2fd; border-color: var(--tcs-blue); }
        .opt-row input { margin-right: 15px; transform: scale(1.3); }

        /* Palette */
        .palette { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; padding: 15px; overflow-y: auto; flex: 1; }
        .p-btn { height: 35px; background: white; border: 1px solid #ccc; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 0.9rem; }
        .p-btn.done { background: #00c853; color: white; border: none; }
        .p-btn.active { border: 2px solid var(--tcs-blue); }

    </style>
</head>
<body>

    <div class="top-bar">
        <div class="brand">
            <img src="https://cdn-icons-png.flaticon.com/512/2997/2997274.png" width="30">
            REVENTO ACADEMY
        </div>
        <div class="profile-badge">User: Student | Class 10</div>
    </div>

    <div id="dashboard">
        <div class="welcome-text">üëã ‡§Ü‡§ú ‡§ï‡•å‡§® ‡§∏‡§æ ‡§ü‡•á‡§∏‡•ç‡§ü ‡§¶‡•á‡§®‡§æ ‡§π‡•à?</div>
        
        <div class="subject-grid">
            <div class="sub-card mix-card" onclick="startTest('MIX')">
                <div class="icon">üöÄ</div>
                <h3>FULL MOCK TEST</h3>
                <p>All Subjects (Maths, Sci, Eng, Hindi, Skt, SST)</p>
                <p style="margin-top: 5px; font-weight: bold;">Time: 3 Hrs 15 Min</p>
            </div>

            <div class="sub-card" onclick="startTest('Maths')">
                <div class="icon">üìê</div>
                <h3>Maths (‡§ó‡§£‡§ø‡§§)</h3>
                <p>Chapterwise & Mix Questions</p>
            </div>

            <div class="sub-card" onclick="startTest('Science')">
                <div class="icon">üß¨</div>
                <h3>Science (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®)</h3>
                <p>Physics, Chem, Bio</p>
            </div>

            <div class="sub-card" onclick="startTest('Social')">
                <div class="icon">üåç</div>
                <h3>Social Science (‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï)</h3>
                <p>History, Geo, Civics</p>
            </div>

            <div class="sub-card" onclick="startTest('Hindi')">
                <div class="icon">üìñ</div>
                <h3>Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</h3>
                <p>Vyakaran & Textbook</p>
            </div>

            <div class="sub-card" onclick="startTest('Sanskrit')">
                <div class="icon">üïâÔ∏è</div>
                <h3>Sanskrit (‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§)</h3>
                <p>Grammar & Literature</p>
            </div>
        </div>
    </div>

    <div id="exam-portal" style="display: none;">
        <div class="exam-header">
            <div>Subject: <span id="exam-subject" style="color:#4fc3f7; font-weight:bold;">MIX</span></div>
            <div class="timer-badge">‚è± <span id="timer">00:00:00</span></div>
        </div>

        <div class="exam-body">
            <div class="q-panel">
                <div style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 20px; color: #666; display: flex; justify-content: space-between;">
                    <span>Question No. <span id="q-no">1</span></span>
                    <span id="sub-tag" style="background: #eee; padding: 2px 8px; font-size: 0.8rem; border-radius: 4px;">SUB</span>
                </div>
                <div class="q-txt" id="question-text">Loading...</div>
                <div id="options-area"></div>
            </div>

            <div class="side-panel">
                <div style="padding: 10px; background: #e0e0e0; text-align: center; font-weight: bold;">Question Palette</div>
                <div class="palette" id="palette-grid"></div>
                <button onclick="submitExam()" style="padding: 15px; background: var(--tcs-blue); color: white; border: none; cursor: pointer; font-weight: bold; font-size: 1rem;">SUBMIT TEST</button>
            </div>
        </div>
    </div>

    <script>
        // ==============================================================
        // üõë UNLIMITED DATA STORAGE (MASTER DB)
        // ==============================================================
        // ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™ ‡§ú‡§ø‡§§‡§®‡•á ‡§ö‡§æ‡§π‡•á‡§Ç ‡§â‡§§‡§®‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§°‡§æ‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ 
        // ‡§¨‡§∏ subject ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§∏‡§π‡•Ä ‡§≤‡§ø‡§ñ‡•á‡§Ç: 'Maths', 'Science', 'Hindi', 'Sanskrit', 'Social'
        
        const MASTER_DB = [
            // --- MATHS ---
            { subject: "Maths", q: "‡§¶‡•ç‡§µ‡§ø‡§ò‡§æ‡§§ ‡§∏‡§Æ‡•Ä‡§ï‡§∞‡§£ 2x¬≤ - 4x + 3 = 0 ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§ø‡§ï‡•ç‡§§‡§ï‡§∞ (Discriminant) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", opts: ["-8", "8", "4", "0"], ans: 0 },
            { subject: "Maths", q: "AP: 2, 7, 12... ‡§ï‡§æ 10‡§µ‡§æ‡§Ç ‡§™‡§¶ ‡§π‡•à:", opts: ["45", "47", "49", "50"], ans: 1 },
            { subject: "Maths", q: "sin 60¬∞ ‡§ï‡§æ ‡§Æ‡§æ‡§® ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", opts: ["1/2", "‚àö3/2", "1/‚àö2", "1"], ans: 1 },

            // --- SCIENCE ---
            { subject: "Science", q: "‡§Æ‡§æ‡§®‡§µ ‡§®‡•á‡§§‡•ç‡§∞ ‡§ï‡•á ‡§ï‡§ø‡§∏ ‡§≠‡§æ‡§ó ‡§™‡§∞ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§ø‡§Ç‡§¨ ‡§¨‡§®‡§§‡§æ ‡§π‡•à?", opts: ["‡§ï‡•â‡§∞‡•ç‡§®‡§ø‡§Ø‡§æ", "‡§™‡§∞‡§ø‡§§‡§æ‡§∞‡§ø‡§ï‡§æ", "‡§™‡•Å‡§§‡§≤‡•Ä", "‡§¶‡•É‡§∑‡•ç‡§ü‡§ø‡§™‡§ü‡§≤ (Retina)"], ans: 3 },
            { subject: "Science", q: "pH ‡§∏‡•ç‡§ï‡•á‡§≤ ‡§ï‡•Ä ‡§™‡§∞‡§æ‡§∏ (Range) ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", opts: ["1-14", "0-14", "1-10", "0-10"], ans: 1 },
            { subject: "Science", q: "‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§ ‡§ß‡§æ‡§∞‡§æ ‡§ï‡§æ SI ‡§Æ‡§æ‡§§‡•ç‡§∞‡§ï ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", opts: ["‡§µ‡•â‡§≤‡•ç‡§ü", "‡§ì‡§Æ", "‡§è‡§Æ‡•ç‡§™‡•Ä‡§Ø‡§∞", "‡§ú‡•Ç‡§≤"], ans: 2 },

            // --- HINDI ---
            { subject: "Hindi", q: "'‡§∞‡§æ‡§Æ‡§ö‡§∞‡§ø‡§§‡§Æ‡§æ‡§®‡§∏' ‡§ï‡•Ä ‡§∞‡§ö‡§®‡§æ ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡•Ä?", opts: ["‡§§‡•Å‡§≤‡§∏‡•Ä‡§¶‡§æ‡§∏", "‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§ï‡§¨‡•Ä‡§∞", "‡§Æ‡•Ä‡§∞‡§æ"], ans: 0 },
            { subject: "Hindi", q: "'‡§®‡•á‡§§‡§æ‡§ú‡•Ä ‡§ï‡§æ ‡§ö‡§∂‡•ç‡§Æ‡§æ' ‡§ï‡§π‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§∂‡§π‡§∞ ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§π‡•à?", opts: ["‡§ï‡§æ‡§®‡§™‡•Å‡§∞", "‡§ï‡§∏‡•ç‡§¨‡§æ", "‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä", "‡§≤‡§ñ‡§®‡§ä"], ans: 1 },

            // --- SANSKRIT ---
            { subject: "Sanskrit", q: "‡§∏‡§¶‡§æ‡§ö‡§æ‡§∞‡§É .... ‡§ß‡§∞‡•ç‡§Æ‡§É ‡§Ö‡§∏‡•ç‡§§‡§ø‡•§", opts: ["‡§™‡§∞‡§Æ‡§É", "‡§≤‡§ò‡•Å‡§É", "‡§ï‡•Å‡§ü‡§ø‡§≤‡§É", "‡§®‡•Ä‡§ö‡§É"], ans: 0 },
            { subject: "Sanskrit", q: "‚Äò‡§µ‡§ø‡§¶‡•ç‡§Ø‡§Ø‡§æ ‡§Ö‡§Æ‡•É‡§§‡§Æ‡§∂‡•ç‡§®‡•Å‡§§‡•á‚Äô - ‡§Ø‡§π ‡§ï‡§ø‡§∏ ‡§â‡§™‡§®‡§ø‡§∑‡§¶ ‡§∏‡•á ‡§π‡•à?", opts: ["‡§à‡§∂‡§æ‡§µ‡§æ‡§∏‡•ç‡§Ø‡•ã‡§™‡§®‡§ø‡§∑‡§¶", "‡§ï‡§†‡•ã‡§™‡§®‡§ø‡§∑‡§¶", "‡§Æ‡•Å‡§£‡•ç‡§°‡§ï", "‡§™‡•ç‡§∞‡§∂‡•ç‡§®"], ans: 0 },

            // --- SOCIAL ---
            { subject: "Social", q: "‡§ú‡§≤‡§ø‡§Ø‡§æ‡§µ‡§æ‡§≤‡§æ ‡§¨‡§æ‡§ó ‡§π‡§§‡•ç‡§Ø‡§æ‡§ï‡§æ‡§Ç‡§° ‡§ï‡§¨ ‡§π‡•Å‡§Ü?", opts: ["1919", "1920", "1921", "1922"], ans: 0 },
            { subject: "Social", q: "‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§≤ ‡§ï‡§ø‡§§‡§®‡•á ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§π‡•à‡§Ç?", opts: ["28", "29", "27", "30"], ans: 0 },
        ];

        // ==============================================================
        // ‚öôÔ∏è SYSTEM LOGIC
        // ==============================================================

        let activeQuestions = []; // ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§õ‡§Ç‡§ü‡•á ‡§π‡•Å‡§è ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ü‡§è‡§Ç‡§ó‡•á
        let currentIdx = 0;
        let userAns = [];
        let timerInterval;

        // 1. START TEST LOGIC (FILTERING)
        function startTest(subject) {
            // Filter Questions
            if(subject === 'MIX') {
                activeQuestions = MASTER_DB; // ‡§∏‡§æ‡§∞‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡•á ‡§≤‡•ã
                startTimer(195 * 60); // 3 Hours 15 Mins
            } else {
                // ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§â‡§∏ ‡§µ‡§ø‡§∑‡§Ø ‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§õ‡§æ‡§Ç‡§ü‡•ã
                activeQuestions = MASTER_DB.filter(item => item.subject === subject);
                startTimer(60 * 60); // 1 Hour for single subject
            }

            if(activeQuestions.length === 0) {
                alert("‡§á‡§∏ ‡§µ‡§ø‡§∑‡§Ø ‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ö‡§≠‡•Ä ‡§Ö‡§™‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§è ‡§π‡•à‡§Ç‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§");
                return;
            }

            // UI Switch
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('exam-portal').style.display = 'flex'; // Fix display
            document.getElementById('exam-subject').innerText = subject.toUpperCase();
            
            // Init Arrays
            userAns = new Array(activeQuestions.length).fill(null);
            
            // Render First Q
            renderPalette();
            loadQ(0);
            
            // Fullscreen
            document.documentElement.requestFullscreen().catch(e => console.log(e));
        }

        // 2. LOAD QUESTION
        function loadQ(idx) {
            currentIdx = idx;
            const data = activeQuestions[idx];

            document.getElementById('q-no').innerText = idx + 1;
            document.getElementById('sub-tag').innerText = data.subject;
            document.getElementById('question-text').innerText = data.q;

            const box = document.getElementById('options-area');
            box.innerHTML = "";
            
            data.opts.forEach((opt, i) => {
                const checked = userAns[idx] === i ? 'checked' : '';
                box.innerHTML += `
                    <label class="opt-row">
                        <input type="radio" name="opt" onclick="saveAns(${i})" ${checked}>
                        ${opt}
                    </label>
                `;
            });

            updatePaletteUI();
        }

        function saveAns(optIdx) {
            userAns[currentIdx] = optIdx;
            updatePaletteUI();
        }

        // 3. PALETTE SYSTEM
        function renderPalette() {
            const grid = document.getElementById('palette-grid');
            grid.innerHTML = "";
            activeQuestions.forEach((_, i) => {
                grid.innerHTML += `<div class="p-btn" id="p-${i}" onclick="loadQ(${i})">${i+1}</div>`;
            });
        }

        function updatePaletteUI() {
            activeQuestions.forEach((_, i) => {
                const btn = document.getElementById(`p-${i}`);
                btn.className = "p-btn";
                if(userAns[i] !== null) btn.classList.add('done');
                if(i === currentIdx) btn.classList.add('active');
            });
        }

        // 4. TIMER
        function startTimer(duration) {
            let t = duration;
            timerInterval = setInterval(() => {
                let h = Math.floor(t/3600);
                let m = Math.floor((t%3600)/60);
                let s = t%60;
                document.getElementById('timer').innerText = `${h}:${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
                if(t <= 0) submitExam();
                t--;
            }, 1000);
        }

        // 5. SUBMIT
        function submitExam() {
            clearInterval(timerInterval);
            let score = 0;
            userAns.forEach((a, i) => {
                if(a === activeQuestions[i].ans) score++;
            });
            
            // Simple Alert Result (You can replace this with the fancy leaderboard logic)
            alert(`TEST SUBMITTED!\n\nScore: ${score} / ${activeQuestions.length}`);
            location.reload(); // Reload to go back to Dashboard
        }

    </script>
</body>
</html>
